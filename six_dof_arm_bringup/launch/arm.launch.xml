<launch>
    <let name="urdf_path" value="$(find-pkg-share six_dof_arm)/urdf/arm.urdf.xacro " />
    <let name="rviz_config" value="$(find-pkg-share six_dof_arm_bringup)/config/moveit.rviz" />
    <let name="control_config_yaml" value="$(find-pkg-share six_dof_arm_bringup)/config/ros2_controllers.yaml" />
    
    <node pkg="robot_state_publisher" exec="robot_state_publisher" >
        <param name="robot_description" value="$(command 'xacro $(var urdf_path)')"/> 
    </node>

    <node pkg="controller_manager" exec="ros2_control_node" >
        <param from="$(var control_config_yaml)" />
        <param name="robot_description" value="$(command 'xacro $(var urdf_path)')" />
    </node>

    <node pkg="controller_manager" exec="spawner" args="joint_state_broadcaster" />
    <node pkg="controller_manager" exec="spawner" args="arm_controller" />
    <node pkg="controller_manager" exec="spawner" args="gripper_controller" />

    <include file="$(find-pkg-share six_dof_arm_moveit_config)/launch/moveit_rviz.launch.py" /> 
    <include file="$(find-pkg-share six_dof_arm_moveit_config)/launch/move_group.launch.py" />
    <!-- <include file="$(find-pkg-share six_dof_arm_bringup)/launch/move_group_with_kinematics.launch.py" /> -->

</launch>